<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Coffee News & Insights</title>
    <meta name="description" content="Latest coffee news, prices, market insights, and interactive charts." />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #0f1115;
            --card: #151823;
            --muted: #9aa4b2;
            --text: #e6e9ef;
            --accent: #8b5cf6; /* violet */
            --accent-2: #22c55e; /* green */
            --border: #232836;
            --chip: #1f2430;
        }
        * { box-sizing: border-box; }
        html, body { height: 100%; }
        body {
            margin: 0;
            font-family: "Inter", system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
            color: var(--text);
            background: radial-gradient(1200px 800px at 80% -10%, rgba(139,92,246,0.12), transparent 60%),
                        radial-gradient(1000px 700px at -10% 10%, rgba(34,197,94,0.10), transparent 60%),
                        var(--bg);
            line-height: 1.6;
        }
        a { color: var(--accent); text-decoration: none; }
        a:hover { text-decoration: underline; }
        .container { width: 100%; max-width: 1100px; margin: 0 auto; padding: 0 20px; }

        /* Header */
        header {
            position: sticky; top: 0; z-index: 10;
            backdrop-filter: saturate(180%) blur(8px);
            background: linear-gradient(to bottom, rgba(15,17,21,0.9), rgba(15,17,21,0.6));
            border-bottom: 1px solid var(--border);
        }
        .nav { display: flex; align-items: center; justify-content: space-between; padding: 14px 0; }
        .brand { display: flex; gap: 10px; align-items: center; font-weight: 700; }
        .brand-badge { width: 36px; height: 36px; border-radius: 10px; display: grid; place-items: center; background: linear-gradient(135deg, var(--accent), var(--accent-2)); color: white; font-weight: 800; }
        nav ul { list-style: none; display: flex; flex-wrap: wrap; gap: 14px; margin: 0; padding: 0; }
        nav a { color: var(--text); padding: 8px 10px; border-radius: 8px; }
        nav a:hover { background: var(--chip); text-decoration: none; }

        /* Hero */
        .hero { padding: 56px 0 24px; text-align: center; }
        .hero h1 { margin: 0 0 12px; font-size: 42px; line-height: 1.1; letter-spacing: -0.02em; }
        .hero p { margin: 0 auto; max-width: 780px; color: var(--muted); font-size: 18px; }
        .chips { margin-top: 18px; display: flex; gap: 10px; justify-content: center; flex-wrap: wrap; }
        .chip { padding: 6px 12px; border: 1px solid var(--border); background: var(--chip); border-radius: 999px; color: var(--muted); font-size: 13px; }

        /* Sections */
        section { padding: 28px 0; }
        .grid { display: grid; grid-template-columns: repeat(12, 1fr); gap: 16px; }
        .col-4 { grid-column: span 4; }
        .col-8 { grid-column: span 8; }
        .col-6 { grid-column: span 6; }
        .card { background: var(--card); border: 1px solid var(--border); border-radius: 14px; padding: 18px; }
        h2 { margin: 0 0 10px; font-size: 22px; }
        h3 { margin: 14px 0 8px; font-size: 16px; color: var(--muted); font-weight: 600; }
        ul { margin: 8px 0 0 18px; }
        code, pre { background: #0b0d12; color: #dbe1ea; border: 1px solid var(--border); border-radius: 10px; }
        code { padding: 2px 6px; }
        pre { padding: 12px; overflow: auto; }

        .kpi { display: flex; gap: 12px; flex-wrap: wrap; margin-top: 8px; }
        .kpi .item { background: var(--chip); border: 1px solid var(--border); border-radius: 12px; padding: 12px 14px; }
        .kpi .label { color: var(--muted); font-size: 12px; }
        .kpi .value { font-weight: 700; font-size: 18px; }

        /* News */
        .news-controls { display: flex; gap: 12px; flex-wrap: wrap; margin-bottom: 12px; }
        .input, .select { background: var(--chip); border: 1px solid var(--border); color: var(--text); border-radius: 10px; padding: 10px 12px; width: 100%; max-width: 320px; }
        .news-grid { display: grid; grid-template-columns: repeat(12, 1fr); gap: 16px; }
        .news-card { grid-column: span 4; display: flex; flex-direction: column; gap: 8px; }
        .news-meta { color: var(--muted); font-size: 12px; }
        .news-title { font-weight: 700; font-size: 18px; margin: 2px 0; }
        .news-tags { display: flex; gap: 6px; flex-wrap: wrap; }

        /* Charts */
        .chart-wrap { background: var(--card); border: 1px solid var(--border); border-radius: 14px; padding: 14px; }
        .legend { color: var(--muted); font-size: 12px; margin-top: 8px; }

        .footer { padding: 28px 0 40px; color: var(--muted); text-align: center; border-top: 1px solid var(--border); margin-top: 28px; }

        @media (max-width: 900px) {
            .col-4, .col-8 { grid-column: span 12; }
            .hero h1 { font-size: 34px; }
            .news-card { grid-column: span 12; }
        }
    </style>
</head>
<body>
    <header>
        <div class="container nav">
            <div class="brand">
                <div class="brand-badge">☕</div>
                <div>Coffee News</div>
            </div>
            <nav aria-label="Primary">
                <ul>
                    <li><a href="#news">News</a></li>
                    <li><a href="#prices">Prices</a></li>
                    <li><a href="#market">Market</a></li>
                    <li><a href="#about">About</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main>
        <section class="hero" id="top">
            <div class="container">
                <h1>Coffee News & Market Insights</h1>
                <p>Curated coffee headlines, live price trends, and market snapshots. Explore what's brewing in the world of coffee.</p>
                <div class="chips">
                    <span class="chip">Prices</span>
                    <span class="chip">Supply</span>
                    <span class="chip">Trade</span>
                    <span class="chip">Vietnam</span>
                </div>
                <div class="kpi">
                    <div class="item"><div class="label">Last Update</div><div class="value" id="lastUpdate">—</div></div>
                    <div class="item"><div class="label">Articles</div><div class="value" id="numArticles">—</div></div>
                    <div class="item"><div class="label">Markets</div><div class="value">VN & Global</div></div>
                </div>
            </div>
        </section>
        
        <!-- News Section -->
        <section id="news">
            <div class="container">
                <div class="card">
                    <h2>Latest Coffee News</h2>
                    <div class="news-controls">
                        <input id="searchInput" class="input" type="search" placeholder="Search news (e.g., robusta, Vietnam, price)" aria-label="Search news" />
                        <select id="tagFilter" class="select" aria-label="Filter by tag">
                            <option value="">All tags</option>
                            <option>Prices</option>
                            <option>Supply</option>
                            <option>Trade</option>
                            <option>Vietnam</option>
                            <option>Global</option>
                            <option>Climate</option>
                        </select>
                    </div>
                    <div id="newsGrid" class="news-grid"></div>
                </div>
            </div>
        </section>

        <!-- Prices Section -->
        <section id="prices">
            <div class="container grid">
                <div class="col-8">
                    <div class="chart-wrap">
                        <h2>Robusta Price Trend (USD/ton)</h2>
                        <canvas id="priceChart" height="140"></canvas>
                        <div class="legend">Sample data for demo. Hook up to your scraped CSV to go live.</div>
                    </div>
                </div>
                <div class="col-4">
                    <div class="card">
                        <h2>Highlights</h2>
                        <ul id="priceHighlights"></ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Market Section -->
        <section id="market">
            <div class="container grid">
                <div class="col-6">
                    <div class="chart-wrap">
                        <h2>Top Importers Market Share</h2>
                        <canvas id="marketShareChart" height="160"></canvas>
                    </div>
                </div>
                <div class="col-6">
                    <div class="chart-wrap">
                        <h2>Production by Year (k tons)</h2>
                        <canvas id="productionChart" height="160"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <section id="about">
            <div class="container">
                <div class="card">
                    <h2>About</h2>
                    <p>This site showcases coffee news and interactive visuals. Data can be connected to your scrapers (<code>coffee_price_scraper*.py</code>) and processed CSVs via a small API or client-side loader.</p>
                    <ul>
                        <li>Content: coffee headlines, summaries, tags, and dates</li>
                        <li>Charts: prices, production, market share</li>
                        <li>Filters: search and tag filter</li>
                    </ul>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <div class="container">
            <div>© <span id="year"></span> Coffee Database. All rights reserved.</div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <script>
        // Footer year
        document.getElementById('year').textContent = new Date().getFullYear();

        // --- Sample Data (replace with your fetched/scraped data) ---
        const newsItems = [
            { id: 1, title: 'Vietnam robusta prices hit multi-year highs', date: '2025-10-22', tags: ['Prices','Vietnam','Trade'], summary: 'Tight supply and strong robusta demand lifted spot prices; exporters see thinner stocks.' },
            { id: 2, title: 'Global arabica edges lower on profit-taking', date: '2025-10-20', tags: ['Prices','Global'], summary: 'Arabica futures cooled after a sharp run-up; traders eye Brazil weather patterns.' },
            { id: 3, title: 'Logistics costs ease for coffee shipments', date: '2025-10-18', tags: ['Trade','Global'], summary: 'Freight rates have normalized, improving margins for roasters and traders.' },
            { id: 4, title: 'Climate variability impacts yields', date: '2025-10-15', tags: ['Climate','Supply','Global'], summary: 'Irregular rainfall patterns pose challenges; adaptation strategies are underway.' },
            { id: 5, title: 'Domestic consumption rises in Vietnam', date: '2025-10-12', tags: ['Vietnam','Supply'], summary: 'Specialty cafes and instant coffee drive steady growth in domestic demand.' },
        ];

        const priceSeries = {
            labels: ['Apr','May','Jun','Jul','Aug','Sep','Oct'],
            values: [3180, 3250, 3325, 3400, 3510, 3600, 3720]
        };

        const marketShare = {
            labels: ['EU','USA','Japan','Russia','Others'],
            values: [38, 27, 14, 6, 15]
        };

        const productionByYear = {
            labels: ['2019','2020','2021','2022','2023','2024','2025'],
            values: [1750, 1680, 1820, 1900, 1860, 1930, 1980]
        };

        // --- News Rendering ---
        const newsGrid = document.getElementById('newsGrid');
        const searchInput = document.getElementById('searchInput');
        const tagFilter = document.getElementById('tagFilter');
        const lastUpdate = document.getElementById('lastUpdate');
        const numArticles = document.getElementById('numArticles');

        function renderNews(items) {
            newsGrid.innerHTML = '';
            const sorted = [...items].sort((a, b) => new Date(b.date) - new Date(a.date));
            sorted.forEach(item => {
                const card = document.createElement('div');
                card.className = 'card news-card';
                card.innerHTML = `
                    <div class="news-meta">${new Date(item.date).toLocaleDateString()}</div>
                    <div class="news-title">${item.title}</div>
                    <div class="news-summary">${item.summary}</div>
                    <div class="news-tags">${item.tags.map(t => `<span class="chip">${t}</span>`).join(' ')}</div>
                `;
                newsGrid.appendChild(card);
            });
            numArticles.textContent = items.length;
            lastUpdate.textContent = new Date().toLocaleDateString();
        }

        function filterNews() {
            const q = (searchInput.value || '').toLowerCase();
            const tag = tagFilter.value;
            const filtered = newsItems.filter(n => {
                const matchesText = !q || `${n.title} ${n.summary}`.toLowerCase().includes(q);
                const matchesTag = !tag || n.tags.includes(tag);
                return matchesText && matchesTag;
            });
            renderNews(filtered);
        }

        searchInput.addEventListener('input', filterNews);
        tagFilter.addEventListener('change', filterNews);

        // --- Charts ---
        function formatUsdTon(v) { return `$${v.toLocaleString()}/t`; }

        const priceCtx = document.getElementById('priceChart');
        const priceChart = new Chart(priceCtx, {
            type: 'line',
            data: {
                labels: priceSeries.labels,
                datasets: [{
                    label: 'Robusta (USD/ton)',
                    data: priceSeries.values,
                    borderColor: 'rgba(139,92,246,1)',
                    backgroundColor: 'rgba(139,92,246,0.2)',
                    tension: 0.3,
                    fill: true,
                    pointRadius: 3
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: { display: false },
                    tooltip: { callbacks: { label: (ctx) => formatUsdTon(ctx.parsed.y) } }
                },
                scales: {
                    y: { ticks: { callback: (v) => `$${v}` }, grid: { color: 'rgba(255,255,255,0.06)' } },
                    x: { grid: { display: false } }
                }
            }
        });

        const marketCtx = document.getElementById('marketShareChart');
        const marketChart = new Chart(marketCtx, {
            type: 'doughnut',
            data: {
                labels: marketShare.labels,
                datasets: [{
                    data: marketShare.values,
                    backgroundColor: ['#8b5cf6','#22c55e','#06b6d4','#f59e0b','#64748b'],
                    borderWidth: 0
                }]
            },
            options: {
                plugins: { legend: { position: 'bottom', labels: { color: '#d1d5db' } } }
            }
        });

        const productionCtx = document.getElementById('productionChart');
        const productionChart = new Chart(productionCtx, {
            type: 'bar',
            data: {
                labels: productionByYear.labels,
                datasets: [{
                    label: 'Production (k tons)',
                    data: productionByYear.values,
                    backgroundColor: 'rgba(34,197,94,0.6)',
                    borderColor: 'rgba(34,197,94,1)',
                    borderWidth: 1,
                    borderRadius: 6
                }]
            },
            options: {
                plugins: { legend: { display: false } },
                scales: {
                    y: { grid: { color: 'rgba(255,255,255,0.06)' } },
                    x: { grid: { display: false } }
                }
            }
        });

        // Highlights
        const priceHighlights = document.getElementById('priceHighlights');
        const last = priceSeries.values[priceSeries.values.length - 1];
        const first = priceSeries.values[0];
        const change = last - first;
        const pct = (change / first) * 100;
        priceHighlights.innerHTML = `
            <li><strong>Latest</strong>: ${formatUsdTon(last)}</li>
            <li><strong>Change (period)</strong>: ${change > 0 ? '+' : ''}${change} USD/t (${pct.toFixed(1)}%)</li>
            <li><strong>High</strong>: ${formatUsdTon(Math.max(...priceSeries.values))}</li>
            <li><strong>Low</strong>: ${formatUsdTon(Math.min(...priceSeries.values))}</li>
        `;

        // Initial render
        renderNews(newsItems);
    </script>
</body>
</html>


